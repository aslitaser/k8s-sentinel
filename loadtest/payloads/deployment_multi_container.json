{
  "apiVersion": "admission.k8s.io/v1",
  "kind": "AdmissionReview",
  "request": {
    "uid": "a1b2c3d4-0000-0000-0000-000000000004",
    "kind": {
      "group": "apps",
      "version": "v1",
      "kind": "Deployment"
    },
    "resource": {
      "group": "apps",
      "version": "v1",
      "resource": "deployments"
    },
    "requestKind": {
      "group": "apps",
      "version": "v1",
      "kind": "Deployment"
    },
    "requestResource": {
      "group": "apps",
      "version": "v1",
      "resource": "deployments"
    },
    "name": "loadtest-multi-deploy",
    "namespace": "default",
    "operation": "CREATE",
    "userInfo": {
      "username": "system:serviceaccount:default:deployer",
      "groups": ["system:serviceaccounts", "system:authenticated"]
    },
    "object": {
      "apiVersion": "apps/v1",
      "kind": "Deployment",
      "metadata": {
        "name": "loadtest-multi-deploy",
        "namespace": "default",
        "labels": {
          "app.kubernetes.io/name": "loadtest-multi",
          "app.kubernetes.io/version": "v3.1.0",
          "app.kubernetes.io/managed-by": "k6"
        }
      },
      "spec": {
        "replicas": 2,
        "selector": {
          "matchLabels": {
            "app.kubernetes.io/name": "loadtest-multi"
          }
        },
        "template": {
          "metadata": {
            "labels": {
              "app.kubernetes.io/name": "loadtest-multi",
              "app.kubernetes.io/version": "v3.1.0",
              "app.kubernetes.io/managed-by": "k6"
            }
          },
          "spec": {
            "containers": [
              {
                "name": "api",
                "image": "gcr.io/myproject/api:v3.1.0",
                "ports": [
                  { "containerPort": 8080 }
                ],
                "resources": {
                  "requests": { "cpu": "200m", "memory": "256Mi" },
                  "limits": { "cpu": "1000m", "memory": "512Mi" }
                }
              },
              {
                "name": "sidecar-proxy",
                "image": "gcr.io/myproject/envoy-proxy:v1.28.0",
                "ports": [
                  { "containerPort": 9901 }
                ],
                "resources": {
                  "requests": { "cpu": "50m", "memory": "64Mi" },
                  "limits": { "cpu": "200m", "memory": "128Mi" }
                }
              },
              {
                "name": "log-shipper",
                "image": "docker.io/unauthorized/fluentbit:latest",
                "resources": {
                  "requests": { "cpu": "50m", "memory": "64Mi" },
                  "limits": { "cpu": "100m", "memory": "128Mi" }
                }
              }
            ]
          }
        }
      }
    },
    "oldObject": null,
    "dryRun": false
  }
}
